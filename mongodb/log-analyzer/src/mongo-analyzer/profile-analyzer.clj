;; gorilla-repl.fileformat = 1

;; **
;;; # Gorilla REPL @@t_i@@
;;; 
;;; @@u_i@@
;; **

;; @@
(ns my.service.server
  (:require [monger.core :as mg]
            [clj-time.coerce :as c]
            [monger.collection :as mc])
  (:import [com.mongodb MongoOptions ServerAddress]))

(use 'gorilla-plot.core)
(use 'gorilla-repl.table)
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; @@
(def x [1 2 3 4 5 6 7 nil nil nil])
(def y [2 4 5 2 6 7 1 ])
(compose (list-plot x)
         (histogram y))

;; @@
;; =>
;;; {"type":"vega","content":{"width":400,"height":247.2187957763672,"padding":{"left":50,"bottom":20,"top":10,"right":10},"scales":[{"name":"x","type":"linear","range":"width","domain":{"data":"72fb6cc6-4927-43cb-8bb6-e905349c1229","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"domain":{"data":"72fb6cc6-4927-43cb-8bb6-e905349c1229","field":"data.y"}}],"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"data":[{"name":"72fb6cc6-4927-43cb-8bb6-e905349c1229","values":[{"x":0,"y":1},{"x":1,"y":2},{"x":2,"y":3},{"x":3,"y":4},{"x":4,"y":5},{"x":5,"y":6},{"x":6,"y":7},{"x":7,"y":null},{"x":8,"y":null},{"x":9,"y":null}]},{"name":"bb397de5-f2af-409b-aab9-8fe9f9ea7d2a","values":[{"x":1.0,"y":0},{"x":2.5,"y":3.0},{"x":4.0,"y":0.0},{"x":5.5,"y":2.0},{"x":7.0,"y":1.0},{"x":8.5,"y":1.0},{"x":10.0,"y":0}]}],"marks":[{"type":"symbol","from":{"data":"72fb6cc6-4927-43cb-8bb6-e905349c1229"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"fill":{"value":"steelblue"},"fillOpacity":{"value":1}},"update":{"shape":"circle","size":{"value":70},"stroke":{"value":"transparent"}},"hover":{"size":{"value":210},"stroke":{"value":"white"}}}},{"type":"line","from":{"data":"bb397de5-f2af-409b-aab9-8fe9f9ea7d2a"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"interpolate":{"value":"step-before"},"fill":{"value":"steelblue"},"fillOpacity":{"value":0.4},"stroke":{"value":"steelblue"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}]},"value":"#gorilla_repl.vega.VegaView{:content {\"width\" 400, \"height\" 247.2188, \"padding\" {\"left\" 50, \"bottom\" 20, \"top\" 10, \"right\" 10}, \"scales\" [{\"name\" \"x\", \"type\" \"linear\", \"range\" \"width\", \"domain\" {\"data\" \"72fb6cc6-4927-43cb-8bb6-e905349c1229\", \"field\" \"data.x\"}} {\"name\" \"y\", \"type\" \"linear\", \"range\" \"height\", \"nice\" true, \"domain\" {\"data\" \"72fb6cc6-4927-43cb-8bb6-e905349c1229\", \"field\" \"data.y\"}}], \"axes\" [{\"scale\" \"x\", \"type\" \"x\"} {\"scale\" \"y\", \"type\" \"y\"}], \"data\" ({\"name\" \"72fb6cc6-4927-43cb-8bb6-e905349c1229\", \"values\" ({\"x\" 0, \"y\" 1} {\"x\" 1, \"y\" 2} {\"x\" 2, \"y\" 3} {\"x\" 3, \"y\" 4} {\"x\" 4, \"y\" 5} {\"x\" 5, \"y\" 6} {\"x\" 6, \"y\" 7} {\"x\" 7, \"y\" nil} {\"x\" 8, \"y\" nil} {\"x\" 9, \"y\" nil})} {\"name\" \"bb397de5-f2af-409b-aab9-8fe9f9ea7d2a\", \"values\" ({\"x\" 1.0, \"y\" 0} {\"x\" 2.5, \"y\" 3.0} {\"x\" 4.0, \"y\" 0.0} {\"x\" 5.5, \"y\" 2.0} {\"x\" 7.0, \"y\" 1.0} {\"x\" 8.5, \"y\" 1.0} {\"x\" 10.0, \"y\" 0})}), \"marks\" ({\"type\" \"symbol\", \"from\" {\"data\" \"72fb6cc6-4927-43cb-8bb6-e905349c1229\"}, \"properties\" {\"enter\" {\"x\" {\"scale\" \"x\", \"field\" \"data.x\"}, \"y\" {\"scale\" \"y\", \"field\" \"data.y\"}, \"fill\" {\"value\" \"steelblue\"}, \"fillOpacity\" {\"value\" 1}}, \"update\" {\"shape\" \"circle\", \"size\" {\"value\" 70}, \"stroke\" {\"value\" \"transparent\"}}, \"hover\" {\"size\" {\"value\" 210}, \"stroke\" {\"value\" \"white\"}}}} {\"type\" \"line\", \"from\" {\"data\" \"bb397de5-f2af-409b-aab9-8fe9f9ea7d2a\"}, \"properties\" {\"enter\" {\"x\" {\"scale\" \"x\", \"field\" \"data.x\"}, \"y\" {\"scale\" \"y\", \"field\" \"data.y\"}, \"interpolate\" {\"value\" \"step-before\"}, \"fill\" {\"value\" \"steelblue\"}, \"fillOpacity\" {\"value\" 0.4}, \"stroke\" {\"value\" \"steelblue\"}, \"strokeWidth\" {\"value\" 2}, \"strokeOpacity\" {\"value\" 1}}}})}}"}
;; <=

;; @@

(defn get-profile-data []
	(let [conn (mg/connect {:host "192.168.19.220"})
      db   (mg/get-db conn "mmsdbminutes-odd")
      coll "system.profile"
      ]
  
  	(mc/find-maps db coll {})
  ) ;; end of call
)

(defn get-unique-ts-in-second [d f]
  (frequencies (map #(long (/ (c/to-long (:ts %)) 1000)) (filter f d)))
  )
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;my.service.server/get-unique-ts-in-second</span>","value":"#'my.service.server/get-unique-ts-in-second"}
;; <=

;; @@
(def d (get-profile-data))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;my.service.server/d</span>","value":"#'my.service.server/d"}
;; <=

;; @@
(defn f-all [x] true)
(defn f-update-only [x] (= (:op x) "update" ))
(defn f-query-only [x] (= (:op x) "query" ))


(table-view (get-unique-ts-in-second d f-all )  :columns ['ts 'count])
;; @@
;; =>
;;; {"type":"list-like","open":"<center><table>","close":"</table></center>","separator":"\n","items":[{"type":"list-like","open":"<tr><th>","close":"</th></tr>","separator":"</th><th>","items":[{"type":"html","content":"<span class='clj-symbol'>ts</span>","value":"ts"},{"type":"html","content":"<span class='clj-symbol'>count</span>","value":"count"}],"value":"[ts count]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1400793963</span>","value":"1400793963"},{"type":"html","content":"<span class='clj-long'>701</span>","value":"701"}],"value":"[1400793963 701]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1400793964</span>","value":"1400793964"},{"type":"html","content":"<span class='clj-long'>349</span>","value":"349"}],"value":"[1400793964 349]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1400793965</span>","value":"1400793965"},{"type":"html","content":"<span class='clj-long'>274</span>","value":"274"}],"value":"[1400793965 274]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1400793966</span>","value":"1400793966"},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"[1400793966 1]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1400793973</span>","value":"1400793973"},{"type":"html","content":"<span class='clj-long'>398</span>","value":"398"}],"value":"[1400793973 398]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1400793974</span>","value":"1400793974"},{"type":"html","content":"<span class='clj-long'>177</span>","value":"177"}],"value":"[1400793974 177]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1400793980</span>","value":"1400793980"},{"type":"html","content":"<span class='clj-long'>7</span>","value":"7"}],"value":"[1400793980 7]"}],"value":"#gorilla_repl.table.TableView{:contents {1400793963 701, 1400793964 349, 1400793965 274, 1400793966 1, 1400793973 398, 1400793974 177, 1400793980 7}, :opts (:columns [ts count])}"}
;; <=

;; @@
(table-view (get-unique-ts-in-second d f-update-only )  :columns ['ts 'count])
;; @@
;; =>
;;; {"type":"list-like","open":"<center><table>","close":"</table></center>","separator":"\n","items":[{"type":"list-like","open":"<tr><th>","close":"</th></tr>","separator":"</th><th>","items":[{"type":"html","content":"<span class='clj-symbol'>ts</span>","value":"ts"},{"type":"html","content":"<span class='clj-symbol'>count</span>","value":"count"}],"value":"[ts count]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1400793963</span>","value":"1400793963"},{"type":"html","content":"<span class='clj-long'>701</span>","value":"701"}],"value":"[1400793963 701]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1400793964</span>","value":"1400793964"},{"type":"html","content":"<span class='clj-long'>349</span>","value":"349"}],"value":"[1400793964 349]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1400793965</span>","value":"1400793965"},{"type":"html","content":"<span class='clj-long'>274</span>","value":"274"}],"value":"[1400793965 274]"}],"value":"#gorilla_repl.table.TableView{:contents {1400793963 701, 1400793964 349, 1400793965 274}, :opts (:columns [ts count])}"}
;; <=

;; @@
;; query only
(table-view (get-unique-ts-in-second d f-query-only )  :columns ['ts 'count])
;; @@
;; =>
;;; {"type":"list-like","open":"<center><table>","close":"</table></center>","separator":"\n","items":[{"type":"list-like","open":"<tr><th>","close":"</th></tr>","separator":"</th><th>","items":[{"type":"html","content":"<span class='clj-symbol'>ts</span>","value":"ts"},{"type":"html","content":"<span class='clj-symbol'>count</span>","value":"count"}],"value":"[ts count]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1400793966</span>","value":"1400793966"},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"[1400793966 1]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1400793973</span>","value":"1400793973"},{"type":"html","content":"<span class='clj-long'>398</span>","value":"398"}],"value":"[1400793973 398]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1400793974</span>","value":"1400793974"},{"type":"html","content":"<span class='clj-long'>177</span>","value":"177"}],"value":"[1400793974 177]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1400793980</span>","value":"1400793980"},{"type":"html","content":"<span class='clj-long'>4</span>","value":"4"}],"value":"[1400793980 4]"}],"value":"#gorilla_repl.table.TableView{:contents {1400793966 1, 1400793973 398, 1400793974 177, 1400793980 4}, :opts (:columns [ts count])}"}
;; <=

;; @@
(def d2 (get-profile-data))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;my.service.server/d2</span>","value":"#'my.service.server/d2"}
;; <=

;; @@
(count d2)
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-unkown'>1750</span>","value":"1750"}
;; <=

;; @@
(table-view (get-unique-ts-in-second d2 f-all )  :columns ['ts 'count] )
;; @@
;; =>
;;; {"type":"list-like","open":"<center><table>","close":"</table></center>","separator":"\n","items":[{"type":"list-like","open":"<tr><th>","close":"</th></tr>","separator":"</th><th>","items":[{"type":"html","content":"<span class='clj-symbol'>ts</span>","value":"ts"},{"type":"html","content":"<span class='clj-symbol'>count</span>","value":"count"}],"value":"[ts count]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918112</span>","value":"1401918112"},{"type":"html","content":"<span class='clj-long'>94</span>","value":"94"}],"value":"[1401918112 94]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918497</span>","value":"1401918497"},{"type":"html","content":"<span class='clj-long'>94</span>","value":"94"}],"value":"[1401918497 94]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918530</span>","value":"1401918530"},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"[1401918530 1]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918050</span>","value":"1401918050"},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"[1401918050 1]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401917892</span>","value":"1401917892"},{"type":"html","content":"<span class='clj-long'>126</span>","value":"126"}],"value":"[1401917892 126]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918277</span>","value":"1401918277"},{"type":"html","content":"<span class='clj-long'>94</span>","value":"94"}],"value":"[1401918277 94]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918470</span>","value":"1401918470"},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"[1401918470 1]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918662</span>","value":"1401918662"},{"type":"html","content":"<span class='clj-long'>94</span>","value":"94"}],"value":"[1401918662 94]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401917990</span>","value":"1401917990"},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"[1401917990 1]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918057</span>","value":"1401918057"},{"type":"html","content":"<span class='clj-long'>94</span>","value":"94"}],"value":"[1401918057 94]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401917930</span>","value":"1401917930"},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"[1401917930 1]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918410</span>","value":"1401918410"},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"[1401918410 1]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918442</span>","value":"1401918442"},{"type":"html","content":"<span class='clj-long'>94</span>","value":"94"}],"value":"[1401918442 94]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401917837</span>","value":"1401917837"},{"type":"html","content":"<span class='clj-long'>94</span>","value":"94"}],"value":"[1401917837 94]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401917870</span>","value":"1401917870"},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"[1401917870 1]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918222</span>","value":"1401918222"},{"type":"html","content":"<span class='clj-long'>94</span>","value":"94"}],"value":"[1401918222 94]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918350</span>","value":"1401918350"},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"[1401918350 1]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918607</span>","value":"1401918607"},{"type":"html","content":"<span class='clj-long'>94</span>","value":"94"}],"value":"[1401918607 94]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918770</span>","value":"1401918770"},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"[1401918770 1]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401917810</span>","value":"1401917810"},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"[1401917810 1]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918002</span>","value":"1401918002"},{"type":"html","content":"<span class='clj-long'>94</span>","value":"94"}],"value":"[1401918002 94]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918290</span>","value":"1401918290"},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"[1401918290 1]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918803</span>","value":"1401918803"},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"[1401918803 1]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918387</span>","value":"1401918387"},{"type":"html","content":"<span class='clj-long'>94</span>","value":"94"}],"value":"[1401918387 94]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918772</span>","value":"1401918772"},{"type":"html","content":"<span class='clj-long'>94</span>","value":"94"}],"value":"[1401918772 94]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918710</span>","value":"1401918710"},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"[1401918710 1]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401917782</span>","value":"1401917782"},{"type":"html","content":"<span class='clj-long'>5</span>","value":"5"}],"value":"[1401917782 5]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918806</span>","value":"1401918806"},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"[1401918806 1]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918230</span>","value":"1401918230"},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"[1401918230 1]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918167</span>","value":"1401918167"},{"type":"html","content":"<span class='clj-long'>94</span>","value":"94"}],"value":"[1401918167 94]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918552</span>","value":"1401918552"},{"type":"html","content":"<span class='clj-long'>94</span>","value":"94"}],"value":"[1401918552 94]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918809</span>","value":"1401918809"},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"[1401918809 1]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918650</span>","value":"1401918650"},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"[1401918650 1]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918170</span>","value":"1401918170"},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"[1401918170 1]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401917947</span>","value":"1401917947"},{"type":"html","content":"<span class='clj-long'>94</span>","value":"94"}],"value":"[1401917947 94]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918332</span>","value":"1401918332"},{"type":"html","content":"<span class='clj-long'>94</span>","value":"94"}],"value":"[1401918332 94]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918717</span>","value":"1401918717"},{"type":"html","content":"<span class='clj-long'>94</span>","value":"94"}],"value":"[1401918717 94]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918590</span>","value":"1401918590"},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"[1401918590 1]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918782</span>","value":"1401918782"},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"[1401918782 1]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918110</span>","value":"1401918110"},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"[1401918110 1]"}],"value":"#gorilla_repl.table.TableView{:contents {1401918112 94, 1401918497 94, 1401918530 1, 1401918050 1, 1401917892 126, 1401918277 94, 1401918470 1, 1401918662 94, 1401917990 1, 1401918057 94, 1401917930 1, 1401918410 1, 1401918442 94, 1401917837 94, 1401917870 1, 1401918222 94, 1401918350 1, 1401918607 94, 1401918770 1, 1401917810 1, 1401918002 94, 1401918290 1, 1401918803 1, 1401918387 94, 1401918772 94, 1401918710 1, 1401917782 5, 1401918806 1, 1401918230 1, 1401918167 94, 1401918552 94, 1401918809 1, 1401918650 1, 1401918170 1, 1401917947 94, 1401918332 94, 1401918717 94, 1401918590 1, 1401918782 1, 1401918110 1}, :opts (:columns [ts count])}"}
;; <=

;; @@
(table-view (get-unique-ts-in-second d2 f-update-only )  :columns ['ts 'count])
;; @@
;; =>
;;; {"type":"list-like","open":"<center><table>","close":"</table></center>","separator":"\n","items":[{"type":"list-like","open":"<tr><th>","close":"</th></tr>","separator":"</th><th>","items":[{"type":"html","content":"<span class='clj-symbol'>ts</span>","value":"ts"},{"type":"html","content":"<span class='clj-symbol'>count</span>","value":"count"}],"value":"[ts count]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918112</span>","value":"1401918112"},{"type":"html","content":"<span class='clj-long'>94</span>","value":"94"}],"value":"[1401918112 94]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918497</span>","value":"1401918497"},{"type":"html","content":"<span class='clj-long'>94</span>","value":"94"}],"value":"[1401918497 94]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401917892</span>","value":"1401917892"},{"type":"html","content":"<span class='clj-long'>126</span>","value":"126"}],"value":"[1401917892 126]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918277</span>","value":"1401918277"},{"type":"html","content":"<span class='clj-long'>94</span>","value":"94"}],"value":"[1401918277 94]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918662</span>","value":"1401918662"},{"type":"html","content":"<span class='clj-long'>94</span>","value":"94"}],"value":"[1401918662 94]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918057</span>","value":"1401918057"},{"type":"html","content":"<span class='clj-long'>94</span>","value":"94"}],"value":"[1401918057 94]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918442</span>","value":"1401918442"},{"type":"html","content":"<span class='clj-long'>94</span>","value":"94"}],"value":"[1401918442 94]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401917837</span>","value":"1401917837"},{"type":"html","content":"<span class='clj-long'>94</span>","value":"94"}],"value":"[1401917837 94]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918222</span>","value":"1401918222"},{"type":"html","content":"<span class='clj-long'>94</span>","value":"94"}],"value":"[1401918222 94]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918607</span>","value":"1401918607"},{"type":"html","content":"<span class='clj-long'>94</span>","value":"94"}],"value":"[1401918607 94]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918002</span>","value":"1401918002"},{"type":"html","content":"<span class='clj-long'>94</span>","value":"94"}],"value":"[1401918002 94]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918387</span>","value":"1401918387"},{"type":"html","content":"<span class='clj-long'>94</span>","value":"94"}],"value":"[1401918387 94]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918772</span>","value":"1401918772"},{"type":"html","content":"<span class='clj-long'>94</span>","value":"94"}],"value":"[1401918772 94]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401917782</span>","value":"1401917782"},{"type":"html","content":"<span class='clj-long'>5</span>","value":"5"}],"value":"[1401917782 5]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918167</span>","value":"1401918167"},{"type":"html","content":"<span class='clj-long'>94</span>","value":"94"}],"value":"[1401918167 94]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918552</span>","value":"1401918552"},{"type":"html","content":"<span class='clj-long'>94</span>","value":"94"}],"value":"[1401918552 94]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401917947</span>","value":"1401917947"},{"type":"html","content":"<span class='clj-long'>94</span>","value":"94"}],"value":"[1401917947 94]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918332</span>","value":"1401918332"},{"type":"html","content":"<span class='clj-long'>94</span>","value":"94"}],"value":"[1401918332 94]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>1401918717</span>","value":"1401918717"},{"type":"html","content":"<span class='clj-long'>94</span>","value":"94"}],"value":"[1401918717 94]"}],"value":"#gorilla_repl.table.TableView{:contents {1401918112 94, 1401918497 94, 1401917892 126, 1401918277 94, 1401918662 94, 1401918057 94, 1401918442 94, 1401917837 94, 1401918222 94, 1401918607 94, 1401918002 94, 1401918387 94, 1401918772 94, 1401917782 5, 1401918167 94, 1401918552 94, 1401917947 94, 1401918332 94, 1401918717 94}, :opts (:columns [ts count])}"}
;; <=

;; @@

;; @@
