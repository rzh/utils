;; gorilla-repl.fileformat = 1

;; **
;;; # MMS HTTP Access Log Analyzer
;;; 
;;; Analyze MMS HTTP Access Log
;; **

;; @@
(ns generator.gen
  (:require [monger.core :as mg]
            [monger.collection :as mc]
            [clojure.pprint :as p]
;            [clj-time.coerce :as c]
            [clojure.data.json :as json]
            [clojure.string :as string]
            )
  (:import [com.mongodb MongoOptions ServerAddress]))

(use 'gorilla-plot.core)
(use 'gorilla-repl.table)
(use '[clojure.core.match :only (match)])
(use 'criterium.core)

(use 'clojure.java.io)

(use '[clojure.string :only (join split)])
;(use 'mongo-analyzer/log-analyzer)

;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; @@
(bench (Thread/sleep 1000))
;; @@
;; ->
;;; WARNING: Final GC required 1.8498807623753621 % of runtime
;;; Evaluation count : 60 in 60 samples of 1 calls.
;;;              Execution time mean : 1.000688 sec
;;;     Execution time std-deviation : 399.511126 Âµs
;;;    Execution time lower quantile : 1.000043 sec ( 2.5%)
;;;    Execution time upper quantile : 1.001104 sec (97.5%)
;;;                    Overhead used : 1.980680 ns
;;; 
;; <-
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; @@
(benchmark (* 100 1000) nil)
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-map'>{<span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:lower-q</span>","value":":lower-q"},{"type":"list-like","open":"<span class='clj-vector'>[<span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-double'>6.153117242338177E-9</span>","value":"6.153117242338177E-9"},{"type":"list-like","open":"<span class='clj-lazy-seq'>(<span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-double'>6.0895537264521055E-9</span>","value":"6.0895537264521055E-9"},{"type":"html","content":"<span class='clj-double'>6.178826290584679E-9</span>","value":"6.178826290584679E-9"}],"value":"(6.0895537264521055E-9 6.178826290584679E-9)"}],"value":"[6.153117242338177E-9 (6.0895537264521055E-9 6.178826290584679E-9)]"}],"value":"[:lower-q [6.153117242338177E-9 (6.0895537264521055E-9 6.178826290584679E-9)]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:sample-count</span>","value":":sample-count"},{"type":"html","content":"<span class='clj-long'>60</span>","value":"60"}],"value":"[:sample-count 60]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:tail-quantile</span>","value":":tail-quantile"},{"type":"html","content":"<span class='clj-double'>0.025</span>","value":"0.025"}],"value":"[:tail-quantile 0.025]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:final-gc-time</span>","value":":final-gc-time"},{"type":"html","content":"<span class='clj-long'>114701000</span>","value":"114701000"}],"value":"[:final-gc-time 114701000]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:mean</span>","value":":mean"},{"type":"list-like","open":"<span class='clj-vector'>[<span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-double'>6.749009774412433E-9</span>","value":"6.749009774412433E-9"},{"type":"list-like","open":"<span class='clj-lazy-seq'>(<span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-double'>6.475072064684131E-9</span>","value":"6.475072064684131E-9"},{"type":"html","content":"<span class='clj-double'>7.1547022356780365E-9</span>","value":"7.1547022356780365E-9"}],"value":"(6.475072064684131E-9 7.1547022356780365E-9)"}],"value":"[6.749009774412433E-9 (6.475072064684131E-9 7.1547022356780365E-9)]"}],"value":"[:mean [6.749009774412433E-9 (6.475072064684131E-9 7.1547022356780365E-9)]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:total-time</span>","value":":total-time"},{"type":"html","content":"<span class='clj-double'>49.56524048</span>","value":"49.56524048"}],"value":"[:total-time 49.56524048]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:overhead</span>","value":":overhead"},{"type":"html","content":"<span class='clj-double'>1.9806800397024937E-9</span>","value":"1.9806800397024937E-9"}],"value":"[:overhead 1.9806800397024937E-9]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:sample-variance</span>","value":":sample-variance"},{"type":"list-like","open":"<span class='clj-vector'>[<span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-double'>1.7227402115097524E-18</span>","value":"1.7227402115097524E-18"},{"type":"list-like","open":"<span class='clj-lazy-seq'>(<span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-double'>0.0</span>","value":"0.0"},{"type":"html","content":"<span class='clj-double'>0.0</span>","value":"0.0"}],"value":"(0.0 0.0)"}],"value":"[1.7227402115097524E-18 (0.0 0.0)]"}],"value":"[:sample-variance [1.7227402115097524E-18 (0.0 0.0)]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:samples</span>","value":":samples"},{"type":"list-like","open":"<span class='clj-lazy-seq'>(<span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>783897108</span>","value":"783897108"},{"type":"html","content":"<span class='clj-long'>764488108</span>","value":"764488108"},{"type":"html","content":"<span class='clj-long'>778818108</span>","value":"778818108"},{"type":"html","content":"<span class='clj-long'>767137108</span>","value":"767137108"},{"type":"html","content":"<span class='clj-long'>763673108</span>","value":"763673108"},{"type":"html","content":"<span class='clj-long'>754383108</span>","value":"754383108"},{"type":"html","content":"<span class='clj-long'>764284108</span>","value":"764284108"},{"type":"html","content":"<span class='clj-long'>766961108</span>","value":"766961108"},{"type":"html","content":"<span class='clj-long'>762340108</span>","value":"762340108"},{"type":"html","content":"<span class='clj-long'>769363108</span>","value":"769363108"},{"type":"html","content":"<span class='clj-long'>771071108</span>","value":"771071108"},{"type":"html","content":"<span class='clj-long'>775468108</span>","value":"775468108"},{"type":"html","content":"<span class='clj-long'>775797108</span>","value":"775797108"},{"type":"html","content":"<span class='clj-long'>1349703108</span>","value":"1349703108"},{"type":"html","content":"<span class='clj-long'>1275352108</span>","value":"1275352108"},{"type":"html","content":"<span class='clj-long'>755136108</span>","value":"755136108"},{"type":"html","content":"<span class='clj-long'>765183108</span>","value":"765183108"},{"type":"html","content":"<span class='clj-long'>773876108</span>","value":"773876108"},{"type":"html","content":"<span class='clj-long'>756670108</span>","value":"756670108"},{"type":"html","content":"<span class='clj-long'>770638108</span>","value":"770638108"},{"type":"html","content":"<span class='clj-long'>772804108</span>","value":"772804108"},{"type":"html","content":"<span class='clj-long'>758059108</span>","value":"758059108"},{"type":"html","content":"<span class='clj-long'>763515108</span>","value":"763515108"},{"type":"html","content":"<span class='clj-long'>746590108</span>","value":"746590108"},{"type":"html","content":"<span class='clj-long'>791987108</span>","value":"791987108"},{"type":"html","content":"<span class='clj-long'>792260108</span>","value":"792260108"},{"type":"html","content":"<span class='clj-long'>775021108</span>","value":"775021108"},{"type":"html","content":"<span class='clj-long'>763428108</span>","value":"763428108"},{"type":"html","content":"<span class='clj-long'>772130108</span>","value":"772130108"},{"type":"html","content":"<span class='clj-long'>771666108</span>","value":"771666108"},{"type":"html","content":"<span class='clj-long'>772124108</span>","value":"772124108"},{"type":"html","content":"<span class='clj-long'>770819108</span>","value":"770819108"},{"type":"html","content":"<span class='clj-long'>859344108</span>","value":"859344108"},{"type":"html","content":"<span class='clj-long'>1496154108</span>","value":"1496154108"},{"type":"html","content":"<span class='clj-long'>789523108</span>","value":"789523108"},{"type":"html","content":"<span class='clj-long'>785474108</span>","value":"785474108"},{"type":"html","content":"<span class='clj-long'>772108108</span>","value":"772108108"},{"type":"html","content":"<span class='clj-long'>758491108</span>","value":"758491108"},{"type":"html","content":"<span class='clj-long'>771300108</span>","value":"771300108"},{"type":"html","content":"<span class='clj-long'>776179108</span>","value":"776179108"},{"type":"html","content":"<span class='clj-long'>772097108</span>","value":"772097108"},{"type":"html","content":"<span class='clj-long'>761994108</span>","value":"761994108"},{"type":"html","content":"<span class='clj-long'>764301108</span>","value":"764301108"},{"type":"html","content":"<span class='clj-long'>767147108</span>","value":"767147108"},{"type":"html","content":"<span class='clj-long'>762399108</span>","value":"762399108"},{"type":"html","content":"<span class='clj-long'>766970108</span>","value":"766970108"},{"type":"html","content":"<span class='clj-long'>775616108</span>","value":"775616108"},{"type":"html","content":"<span class='clj-long'>781842108</span>","value":"781842108"},{"type":"html","content":"<span class='clj-long'>772797108</span>","value":"772797108"},{"type":"html","content":"<span class='clj-long'>775364108</span>","value":"775364108"},{"type":"html","content":"<span class='clj-long'>765019108</span>","value":"765019108"},{"type":"html","content":"<span class='clj-long'>848485108</span>","value":"848485108"},{"type":"html","content":"<span class='clj-long'>1419794108</span>","value":"1419794108"},{"type":"html","content":"<span class='clj-long'>782204108</span>","value":"782204108"},{"type":"html","content":"<span class='clj-long'>766575108</span>","value":"766575108"},{"type":"html","content":"<span class='clj-long'>805701108</span>","value":"805701108"},{"type":"html","content":"<span class='clj-long'>794282108</span>","value":"794282108"},{"type":"html","content":"<span class='clj-long'>974725108</span>","value":"974725108"},{"type":"html","content":"<span class='clj-long'>1053905108</span>","value":"1053905108"},{"type":"html","content":"<span class='clj-long'>950803108</span>","value":"950803108"}],"value":"(783897108 764488108 778818108 767137108 763673108 754383108 764284108 766961108 762340108 769363108 771071108 775468108 775797108 1349703108 1275352108 755136108 765183108 773876108 756670108 770638108 772804108 758059108 763515108 746590108 791987108 792260108 775021108 763428108 772130108 771666108 772124108 770819108 859344108 1496154108 789523108 785474108 772108108 758491108 771300108 776179108 772097108 761994108 764301108 767147108 762399108 766970108 775616108 781842108 772797108 775364108 765019108 848485108 1419794108 782204108 766575108 805701108 794282108 974725108 1053905108 950803108)"}],"value":"[:samples (783897108 764488108 778818108 767137108 763673108 754383108 764284108 766961108 762340108 769363108 771071108 775468108 775797108 1349703108 1275352108 755136108 765183108 773876108 756670108 770638108 772804108 758059108 763515108 746590108 791987108 792260108 775021108 763428108 772130108 771666108 772124108 770819108 859344108 1496154108 789523108 785474108 772108108 758491108 771300108 776179108 772097108 761994108 764301108 767147108 762399108 766970108 775616108 781842108 772797108 775364108 765019108 848485108 1419794108 782204108 766575108 805701108 794282108 974725108 1053905108 950803108)]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:sample-mean</span>","value":":sample-mean"},{"type":"list-like","open":"<span class='clj-vector'>[<span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-double'>6.737972006175191E-9</span>","value":"6.737972006175191E-9"},{"type":"list-like","open":"<span class='clj-lazy-seq'>(<span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-double'>2.8003760513332305E-9</span>","value":"2.8003760513332305E-9"},{"type":"html","content":"<span class='clj-double'>1.0675567961017154E-8</span>","value":"1.0675567961017154E-8"}],"value":"(2.8003760513332305E-9 1.0675567961017154E-8)"}],"value":"[6.737972006175191E-9 (2.8003760513332305E-9 1.0675567961017154E-8)]"}],"value":"[:sample-mean [6.737972006175191E-9 (2.8003760513332305E-9 1.0675567961017154E-8)]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:outlier-variance</span>","value":":outlier-variance"},{"type":"html","content":"<span class='clj-double'>0.9110994996075796</span>","value":"0.9110994996075796"}],"value":"[:outlier-variance 0.9110994996075796]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:os-details</span>","value":":os-details"},{"type":"list-like","open":"<span class='clj-map'>{<span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:arch</span>","value":":arch"},{"type":"html","content":"<span class='clj-string'>&quot;x86_64&quot;</span>","value":"\"x86_64\""}],"value":"[:arch \"x86_64\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:available-processors</span>","value":":available-processors"},{"type":"html","content":"<span class='clj-unkown'>8</span>","value":"8"}],"value":"[:available-processors 8]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:name</span>","value":":name"},{"type":"html","content":"<span class='clj-string'>&quot;Mac OS X&quot;</span>","value":"\"Mac OS X\""}],"value":"[:name \"Mac OS X\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:version</span>","value":":version"},{"type":"html","content":"<span class='clj-string'>&quot;10.9.3&quot;</span>","value":"\"10.9.3\""}],"value":"[:version \"10.9.3\"]"}],"value":"{:arch \"x86_64\", :available-processors 8, :name \"Mac OS X\", :version \"10.9.3\"}"}],"value":"[:os-details {:arch \"x86_64\", :available-processors 8, :name \"Mac OS X\", :version \"10.9.3\"}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:warmup-executions</span>","value":":warmup-executions"},{"type":"html","content":"<span class='clj-long'>1198447106</span>","value":"1198447106"}],"value":"[:warmup-executions 1198447106]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:outliers</span>","value":":outliers"},{"type":"list-like","open":"<span class='clj-map'>{<span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:low-severe</span>","value":":low-severe"},{"type":"html","content":"<span class='clj-long'>0</span>","value":"0"}],"value":"[:low-severe 0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:low-mild</span>","value":":low-mild"},{"type":"html","content":"<span class='clj-long'>0</span>","value":"0"}],"value":"[:low-mild 0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:high-mild</span>","value":":high-mild"},{"type":"html","content":"<span class='clj-long'>0</span>","value":"0"}],"value":"[:high-mild 0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:high-severe</span>","value":":high-severe"},{"type":"html","content":"<span class='clj-long'>9</span>","value":"9"}],"value":"[:high-severe 9]"}],"value":"#criterium.core.OutlierCount{:low-severe 0, :low-mild 0, :high-mild 0, :high-severe 9}"}],"value":"[:outliers #criterium.core.OutlierCount{:low-severe 0, :low-mild 0, :high-mild 0, :high-severe 9}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:upper-q</span>","value":":upper-q"},{"type":"list-like","open":"<span class='clj-vector'>[<span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-double'>1.10209182204594E-8</span>","value":"1.10209182204594E-8"},{"type":"list-like","open":"<span class='clj-lazy-seq'>(<span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-double'>8.196713641434413E-9</span>","value":"8.196713641434413E-9"},{"type":"html","content":"<span class='clj-double'>1.2203363969186189E-8</span>","value":"1.2203363969186189E-8"}],"value":"(8.196713641434413E-9 1.2203363969186189E-8)"}],"value":"[1.10209182204594E-8 (8.196713641434413E-9 1.2203363969186189E-8)]"}],"value":"[:upper-q [1.10209182204594E-8 (8.196713641434413E-9 1.2203363969186189E-8)]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:options</span>","value":":options"},{"type":"list-like","open":"<span class='clj-map'>{<span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:overhead</span>","value":":overhead"},{"type":"html","content":"<span class='clj-double'>1.9806800397024937E-9</span>","value":"1.9806800397024937E-9"}],"value":"[:overhead 1.9806800397024937E-9]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:max-gc-attempts</span>","value":":max-gc-attempts"},{"type":"html","content":"<span class='clj-long'>100</span>","value":"100"}],"value":"[:max-gc-attempts 100]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:samples</span>","value":":samples"},{"type":"html","content":"<span class='clj-long'>60</span>","value":"60"}],"value":"[:samples 60]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:target-execution-time</span>","value":":target-execution-time"},{"type":"html","content":"<span class='clj-long'>1000000000</span>","value":"1000000000"}],"value":"[:target-execution-time 1000000000]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:warmup-jit-period</span>","value":":warmup-jit-period"},{"type":"html","content":"<span class='clj-long'>10000000000</span>","value":"10000000000"}],"value":"[:warmup-jit-period 10000000000]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:tail-quantile</span>","value":":tail-quantile"},{"type":"html","content":"<span class='clj-double'>0.025</span>","value":"0.025"}],"value":"[:tail-quantile 0.025]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:bootstrap-size</span>","value":":bootstrap-size"},{"type":"html","content":"<span class='clj-long'>1000</span>","value":"1000"}],"value":"[:bootstrap-size 1000]"}],"value":"{:overhead 1.9806800397024937E-9, :max-gc-attempts 100, :samples 60, :target-execution-time 1000000000, :warmup-jit-period 10000000000, :tail-quantile 0.025, :bootstrap-size 1000}"}],"value":"[:options {:overhead 1.9806800397024937E-9, :max-gc-attempts 100, :samples 60, :target-execution-time 1000000000, :warmup-jit-period 10000000000, :tail-quantile 0.025, :bootstrap-size 1000}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:results</span>","value":":results"},{"type":"list-like","open":"<span class='clj-lazy-seq'>(<span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"},{"type":"html","content":"<span class='clj-long'>100000</span>","value":"100000"}],"value":"(100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000)"}],"value":"[:results (100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000)]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:runtime-details</span>","value":":runtime-details"},{"type":"list-like","open":"<span class='clj-map'>{<span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:java-version</span>","value":":java-version"},{"type":"html","content":"<span class='clj-string'>&quot;1.7.0_45&quot;</span>","value":"\"1.7.0_45\""}],"value":"[:java-version \"1.7.0_45\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:vm-version</span>","value":":vm-version"},{"type":"html","content":"<span class='clj-string'>&quot;24.45-b08&quot;</span>","value":"\"24.45-b08\""}],"value":"[:vm-version \"24.45-b08\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:clojure-version-string</span>","value":":clojure-version-string"},{"type":"html","content":"<span class='clj-string'>&quot;1.5.1&quot;</span>","value":"\"1.5.1\""}],"value":"[:clojure-version-string \"1.5.1\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:spec-version</span>","value":":spec-version"},{"type":"html","content":"<span class='clj-string'>&quot;1.7&quot;</span>","value":"\"1.7\""}],"value":"[:spec-version \"1.7\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:spec-name</span>","value":":spec-name"},{"type":"html","content":"<span class='clj-string'>&quot;Java Virtual Machine Specification&quot;</span>","value":"\"Java Virtual Machine Specification\""}],"value":"[:spec-name \"Java Virtual Machine Specification\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:input-arguments</span>","value":":input-arguments"},{"type":"list-like","open":"<span class='clj-vector'>[<span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;-Dclojure.compile.path=/Users/rui/play/MyProjects/utils/mongodb/log-analyzer/target/classes&quot;</span>","value":"\"-Dclojure.compile.path=/Users/rui/play/MyProjects/utils/mongodb/log-analyzer/target/classes\""},{"type":"html","content":"<span class='clj-string'>&quot;-Ddefault.version=0.1.0-SNAPSHOT&quot;</span>","value":"\"-Ddefault.version=0.1.0-SNAPSHOT\""},{"type":"html","content":"<span class='clj-string'>&quot;-Dfile.encoding=UTF-8&quot;</span>","value":"\"-Dfile.encoding=UTF-8\""},{"type":"html","content":"<span class='clj-string'>&quot;-Dclojure.debug=false&quot;</span>","value":"\"-Dclojure.debug=false\""}],"value":"[\"-Dclojure.compile.path=/Users/rui/play/MyProjects/utils/mongodb/log-analyzer/target/classes\" \"-Ddefault.version=0.1.0-SNAPSHOT\" \"-Dfile.encoding=UTF-8\" \"-Dclojure.debug=false\"]"}],"value":"[:input-arguments [\"-Dclojure.compile.path=/Users/rui/play/MyProjects/utils/mongodb/log-analyzer/target/classes\" \"-Ddefault.version=0.1.0-SNAPSHOT\" \"-Dfile.encoding=UTF-8\" \"-Dclojure.debug=false\"]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:vm-name</span>","value":":vm-name"},{"type":"html","content":"<span class='clj-string'>&quot;Java HotSpot(TM) 64-Bit Server VM&quot;</span>","value":"\"Java HotSpot(TM) 64-Bit Server VM\""}],"value":"[:vm-name \"Java HotSpot(TM) 64-Bit Server VM\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:name</span>","value":":name"},{"type":"html","content":"<span class='clj-string'>&quot;28000@Ruis-MacBook-Pro.local&quot;</span>","value":"\"28000@Ruis-MacBook-Pro.local\""}],"value":"[:name \"28000@Ruis-MacBook-Pro.local\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:clojure-version</span>","value":":clojure-version"},{"type":"list-like","open":"<span class='clj-map'>{<span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:major</span>","value":":major"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:major 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:minor</span>","value":":minor"},{"type":"html","content":"<span class='clj-unkown'>5</span>","value":"5"}],"value":"[:minor 5]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:incremental</span>","value":":incremental"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:incremental 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:qualifier</span>","value":":qualifier"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:qualifier nil]"}],"value":"{:major 1, :minor 5, :incremental 1, :qualifier nil}"}],"value":"[:clojure-version {:major 1, :minor 5, :incremental 1, :qualifier nil}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:sun-arch-data-model</span>","value":":sun-arch-data-model"},{"type":"html","content":"<span class='clj-string'>&quot;64&quot;</span>","value":"\"64\""}],"value":"[:sun-arch-data-model \"64\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:vm-vendor</span>","value":":vm-vendor"},{"type":"html","content":"<span class='clj-string'>&quot;Oracle Corporation&quot;</span>","value":"\"Oracle Corporation\""}],"value":"[:vm-vendor \"Oracle Corporation\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:java-runtime-version</span>","value":":java-runtime-version"},{"type":"html","content":"<span class='clj-string'>&quot;1.7.0_45-b18&quot;</span>","value":"\"1.7.0_45-b18\""}],"value":"[:java-runtime-version \"1.7.0_45-b18\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:spec-vendor</span>","value":":spec-vendor"},{"type":"html","content":"<span class='clj-string'>&quot;Oracle Corporation&quot;</span>","value":"\"Oracle Corporation\""}],"value":"[:spec-vendor \"Oracle Corporation\"]"}],"value":"{:java-version \"1.7.0_45\", :vm-version \"24.45-b08\", :clojure-version-string \"1.5.1\", :spec-version \"1.7\", :spec-name \"Java Virtual Machine Specification\", :input-arguments [\"-Dclojure.compile.path=/Users/rui/play/MyProjects/utils/mongodb/log-analyzer/target/classes\" \"-Ddefault.version=0.1.0-SNAPSHOT\" \"-Dfile.encoding=UTF-8\" \"-Dclojure.debug=false\"], :vm-name \"Java HotSpot(TM) 64-Bit Server VM\", :name \"28000@Ruis-MacBook-Pro.local\", :clojure-version {:major 1, :minor 5, :incremental 1, :qualifier nil}, :sun-arch-data-model \"64\", :vm-vendor \"Oracle Corporation\", :java-runtime-version \"1.7.0_45-b18\", :spec-vendor \"Oracle Corporation\"}"}],"value":"[:runtime-details {:java-version \"1.7.0_45\", :vm-version \"24.45-b08\", :clojure-version-string \"1.5.1\", :spec-version \"1.7\", :spec-name \"Java Virtual Machine Specification\", :input-arguments [\"-Dclojure.compile.path=/Users/rui/play/MyProjects/utils/mongodb/log-analyzer/target/classes\" \"-Ddefault.version=0.1.0-SNAPSHOT\" \"-Dfile.encoding=UTF-8\" \"-Dclojure.debug=false\"], :vm-name \"Java HotSpot(TM) 64-Bit Server VM\", :name \"28000@Ruis-MacBook-Pro.local\", :clojure-version {:major 1, :minor 5, :incremental 1, :qualifier nil}, :sun-arch-data-model \"64\", :vm-vendor \"Oracle Corporation\", :java-runtime-version \"1.7.0_45-b18\", :spec-vendor \"Oracle Corporation\"}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:variance</span>","value":":variance"},{"type":"list-like","open":"<span class='clj-vector'>[<span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-double'>1.790348242698877E-18</span>","value":"1.790348242698877E-18"},{"type":"list-like","open":"<span class='clj-lazy-seq'>(<span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-double'>6.586150186502666E-19</span>","value":"6.586150186502666E-19"},{"type":"html","content":"<span class='clj-double'>3.509005097373889E-18</span>","value":"3.509005097373889E-18"}],"value":"(6.586150186502666E-19 3.509005097373889E-18)"}],"value":"[1.790348242698877E-18 (6.586150186502666E-19 3.509005097373889E-18)]"}],"value":"[:variance [1.790348242698877E-18 (6.586150186502666E-19 3.509005097373889E-18)]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:warmup-time</span>","value":":warmup-time"},{"type":"html","content":"<span class='clj-long'>10217686000</span>","value":"10217686000"}],"value":"[:warmup-time 10217686000]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:execution-count</span>","value":":execution-count"},{"type":"html","content":"<span class='clj-long'>122601777</span>","value":"122601777"}],"value":"[:execution-count 122601777]"}],"value":"{:lower-q [6.153117242338177E-9 (6.0895537264521055E-9 6.178826290584679E-9)], :sample-count 60, :tail-quantile 0.025, :final-gc-time 114701000, :mean [6.749009774412433E-9 (6.475072064684131E-9 7.1547022356780365E-9)], :total-time 49.56524048, :overhead 1.9806800397024937E-9, :sample-variance [1.7227402115097524E-18 (0.0 0.0)], :samples (783897108 764488108 778818108 767137108 763673108 754383108 764284108 766961108 762340108 769363108 771071108 775468108 775797108 1349703108 1275352108 755136108 765183108 773876108 756670108 770638108 772804108 758059108 763515108 746590108 791987108 792260108 775021108 763428108 772130108 771666108 772124108 770819108 859344108 1496154108 789523108 785474108 772108108 758491108 771300108 776179108 772097108 761994108 764301108 767147108 762399108 766970108 775616108 781842108 772797108 775364108 765019108 848485108 1419794108 782204108 766575108 805701108 794282108 974725108 1053905108 950803108), :sample-mean [6.737972006175191E-9 (2.8003760513332305E-9 1.0675567961017154E-8)], :outlier-variance 0.9110994996075796, :os-details {:arch \"x86_64\", :available-processors 8, :name \"Mac OS X\", :version \"10.9.3\"}, :warmup-executions 1198447106, :outliers #criterium.core.OutlierCount{:low-severe 0, :low-mild 0, :high-mild 0, :high-severe 9}, :upper-q [1.10209182204594E-8 (8.196713641434413E-9 1.2203363969186189E-8)], :options {:overhead 1.9806800397024937E-9, :max-gc-attempts 100, :samples 60, :target-execution-time 1000000000, :warmup-jit-period 10000000000, :tail-quantile 0.025, :bootstrap-size 1000}, :results (100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000 100000), :runtime-details {:java-version \"1.7.0_45\", :vm-version \"24.45-b08\", :clojure-version-string \"1.5.1\", :spec-version \"1.7\", :spec-name \"Java Virtual Machine Specification\", :input-arguments [\"-Dclojure.compile.path=/Users/rui/play/MyProjects/utils/mongodb/log-analyzer/target/classes\" \"-Ddefault.version=0.1.0-SNAPSHOT\" \"-Dfile.encoding=UTF-8\" \"-Dclojure.debug=false\"], :vm-name \"Java HotSpot(TM) 64-Bit Server VM\", :name \"28000@Ruis-MacBook-Pro.local\", :clojure-version {:major 1, :minor 5, :incremental 1, :qualifier nil}, :sun-arch-data-model \"64\", :vm-vendor \"Oracle Corporation\", :java-runtime-version \"1.7.0_45-b18\", :spec-vendor \"Oracle Corporation\"}, :variance [1.790348242698877E-18 (6.586150186502666E-19 3.509005097373889E-18)], :warmup-time 10217686000, :execution-count 122601777}"}
;; <=

;; @@
(with-progress-reporting (quick-bench (Thread/sleep 1000) :verbose))
;; @@
;; ->
;;; Warming up for JIT optimisations 5000000000 ...
;;; Estimating execution count ...
;;; Sampling ...
;;; Final GC...
;;; Checking GC...
;;; WARNING: Final GC required 1.552224958349385 % of runtime
;;; Finding outliers ...
;;; Bootstrapping ...
;;; Checking outlier significance
;;; x86_64 Mac OS X 10.9.3 8 cpu(s)
;;; Java HotSpot(TM) 64-Bit Server VM 24.45-b08
;;; Runtime arguments: -Dclojure.compile.path=/Users/rui/play/MyProjects/utils/mongodb/log-analyzer/target/classes -Ddefault.version=0.1.0-SNAPSHOT -Dfile.encoding=UTF-8 -Dclojure.debug=false
;;; Evaluation count : 6 in 6 samples of 1 calls.
;;;       Execution time sample mean : 1.000832 sec
;;;              Execution time mean : 1.000831 sec
;;; Execution time sample std-deviation : 359.190989 Âµs
;;;     Execution time std-deviation : 420.918717 Âµs
;;;    Execution time lower quantile : 1.000188 sec ( 2.5%)
;;;    Execution time upper quantile : 1.001051 sec (97.5%)
;;;                    Overhead used : 1.980680 ns
;;; 
;; <-
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; @@
(def conn (mg/connect))
(def db (mg/get-db conn "test"))
(def coll "cc")
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;generator.gen/coll</span>","value":"#'generator.gen/coll"}
;; <=

;; @@
(with-progress-reporting (bench (mc/insert db coll {:a 199})))
;; @@
;; ->
;;; Warming up for JIT optimisations 10000000000 ...
;;;   compilation occured before 10990 iterations
;;;   compilation occured before 43957 iterations
;;; Estimating execution count ...
;;; Sampling ...
;;; Final GC...
;;; Checking GC...
;;; Finding outliers ...
;;; Bootstrapping ...
;;; Checking outlier significance
;;; Evaluation count : 666300 in 60 samples of 11105 calls.
;;;              Execution time mean : 96.248366 Âµs
;;;     Execution time std-deviation : 13.108238 Âµs
;;;    Execution time lower quantile : 89.732914 Âµs ( 2.5%)
;;;    Execution time upper quantile : 135.976504 Âµs (97.5%)
;;;                    Overhead used : 1.980680 ns
;;; 
;;; Found 11 outliers in 60 samples (18.3333 %)
;;; 	low-severe	 1 (1.6667 %)
;;; 	low-mild	 10 (16.6667 %)
;;;  Variance from outliers : 80.7303 % Variance is severely inflated by outliers
;;; 
;; <-
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; @@
(with-progress-reporting (bench (mc/insert db coll {:a 199})))
;; @@
;; ->
;;; Warming up for JIT optimisations 10000000000 ...
;;;   compilation occured before 13072 iterations
;;; Estimating execution count ...
;;; Sampling ...
;;; Final GC...
;;; Checking GC...
;;; Finding outliers ...
;;; Bootstrapping ...
;;; Checking outlier significance
;;; Evaluation count : 663480 in 60 samples of 11058 calls.
;;;              Execution time mean : 97.456054 Âµs
;;;     Execution time std-deviation : 17.090180 Âµs
;;;    Execution time lower quantile : 90.136200 Âµs ( 2.5%)
;;;    Execution time upper quantile : 148.069551 Âµs (97.5%)
;;;                    Overhead used : 1.980680 ns
;;; 
;;; Found 9 outliers in 60 samples (15.0000 %)
;;; 	low-severe	 1 (1.6667 %)
;;; 	low-mild	 8 (13.3333 %)
;;;  Variance from outliers : 87.6726 % Variance is severely inflated by outliers
;;; 
;; <-
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; @@
(with-progress-reporting (bench (mc/insert db coll {:a 199})))

;; @@
;; ->
;;; Warming up for JIT optimisations 10000000000 ...
;;;   compilation occured before 18779 iterations
;;; Estimating execution count ...
;;; Sampling ...
;;; Final GC...
;;; Checking GC...
;;; Finding outliers ...
;;; Bootstrapping ...
;;; Checking outlier significance
;;; Evaluation count : 653520 in 60 samples of 10892 calls.
;;;              Execution time mean : 107.857110 Âµs
;;;     Execution time std-deviation : 20.767724 Âµs
;;;    Execution time lower quantile : 91.119944 Âµs ( 2.5%)
;;;    Execution time upper quantile : 174.734815 Âµs (97.5%)
;;;                    Overhead used : 1.980680 ns
;;; 
;;; Found 6 outliers in 60 samples (10.0000 %)
;;; 	low-severe	 6 (10.0000 %)
;;;  Variance from outliers : 89.4311 % Variance is severely inflated by outliers
;;; 
;; <-
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; @@

;; @@
